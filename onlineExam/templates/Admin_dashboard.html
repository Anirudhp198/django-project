{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard</title>

  <!-- Bootstrap Icons CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f6f8;
      margin: 0;
      padding: 0;
    }

    .wrapper {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #1e3a8a;
      color: white;
      padding: 20px;
      border-radius: 8px;
    }

    .header h1 {
      margin: 0;
      font-size: 24px;
      display: flex;
      align-items: center;
    }

    .logout-btn {
      background-color: #f87171;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
    }

    .logout-btn:hover {
      background-color: #dc2626;
    }

    .admin-info {
      background-color: #e0f2fe;
      padding: 15px 25px;
      border-radius: 8px;
      margin: 20px 0;
      font-size: 16px;
    }

    .section {
      margin-top: 30px;
    }

    .section h2 {
      color: #1e3a8a;
      font-size: 22px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
    }

    .section h2 i {
      margin-right: 8px;
    }

    .add-subject-btn {
      display: inline-block;
      background-color: #10b981;
      color: white;
      padding: 8px 16px;
      margin-bottom: 15px;
      border-radius: 5px;
      text-decoration: none;
      font-size: 16px;
    }

    .add-subject-btn:hover {
      background-color: #059669;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    th, td {
      padding: 12px 15px;
      border: 1px solid #ccc;
      text-align: left;
    }

    th {
      background-color: #1e3a8a;
      color: white;
    }

    td {
      background-color: #ffffff;
    }

    .action-button,
    .delete-btn {
      padding: 6px 12px;
      font-size: 14px;
      margin-right: 6px;
      border-radius: 4px;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
    }

    .action-button {
      background-color: #3b82f6;
      color: white;
    }

    .action-button:hover {
      background-color: #2563eb;
    }

    .delete-btn {
      background-color: #ef4444;
      color: white;
    }

    .delete-btn:hover {
      background-color: #dc2626;
    }

    .icon {
      margin-right: 6px;
    }

    p {
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Header -->
    <div class="header">
      <h1><i class="bi bi-person-fill icon"></i>Welcome, {{ admin.username }}</h1>
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit" class="logout-btn">
          <i class="bi bi-box-arrow-right icon"></i>Logout
        </button>
      </form>
    </div>

    <!-- Admin Info -->
    <div class="admin-info">
      <p><strong><i class="bi bi-envelope icon"></i>Email:</strong> {{ admin.email }}</p>
      <p><strong><i class="bi bi-telephone icon"></i>Contact:</strong> {{ admin.contact|default:"N/A" }}</p>
    </div>

    <!-- Subjects Section -->
    <div class="section">
      <h2><i class="bi bi-book icon"></i>Subjects</h2>
      <a href="{% url 'add_subject' %}" class="add-subject-btn">
        <i class="bi bi-plus-circle icon"></i>Add New Subject
      </a>
      {% if subjects %}
      <table>
        <thead>
          <tr>
            <th>Subject Name</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for subject in subjects %}
          <tr>
            <td>{{ subject.subname }}</td>
            <td>
              <a href="{% url 'view_questions' subject.id %}" class="action-button">
                <i class="bi bi-eye icon"></i>View Questions
              </a>
              <form method="post" action="{% url 'delete_subject' subject.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="delete-btn"
                  onclick="return confirm('Are you sure you want to delete this subject?');">
                  <i class="bi bi-trash icon"></i>Delete Subject
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No subjects available.</p>
      {% endif %}
    </div>

    <!-- Exam Results Section -->
    <div class="section">
      <h2><i class="bi bi-clipboard-check icon"></i>Exam Results</h2>
      {% if results %}
      <table>
        <thead>
          <tr>
            <th><i class="bi bi-person-badge icon"></i>Enroll</th>
            <th><i class="bi bi-person icon"></i>Login ID</th>
            <th><i class="bi bi-journal-bookmark icon"></i>Subject</th>
            <th><i class="bi bi-list-ol icon"></i>Total Questions</th>
            <th><i class="bi bi-clipboard-data icon"></i>Total Marks</th>
          </tr>
        </thead>
        <tbody>
          {% for result in results %}
          <tr>
            <td data-label="Student Enroll">{{ result.student.enroll }}</td>
            <td data-label="Student Login ID">{{ result.student.loginid }}</td>
            <td data-label="Subject">{{ result.subject.subname }}</td>
            <td data-label="Total Questions">{{ result.totalquestion }}</td>
            <td data-label="Total Marks">{{ result.totalmarks }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No exam results found.</p>
      {% endif %}
    </div>
  </div>
</body>
</html>
